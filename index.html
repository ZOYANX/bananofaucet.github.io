<!DOCTYPE html>
<html prefix="og: https://ogp.me/ns#">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-13YC9Q2MY4"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-13YC9Q2MY4');
    </script>
    <title>BananoFaucet</title>
    <link rel="stylesheet" href="styles/index.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="theme-color" content="#FBDD11">
    <link rel="icon" type="image/png" href="https://banano.cc/assets/logo.png" />
    <meta property="image" content="https://banano.cc/assets/logo.png">
    <meta name="keywords" content="banano, banano faucet, free banano">
    <meta name="author" content="MiranDaniel">
    <meta name="description" content="Get free Banano, every week!">
    <meta property="og:image" content="https://banano.cc/assets/logo.png">
    <meta property="og:thumbnail" content="https://banano.cc/assets/logo.png">
</head>

<body>
    <header class="center">
        <div id="hdr">
            <img src="images/banano2.svg" id="logo">
            <h1 id="title">
                BananoFaucet
            </h1>
        </div>
    </header>
    <hr>
    <div class="center">
        <p id="rate">
            This faucet can be used once every 7 days
        </p>
        <div class="center">
            <div id="req">
                <h3 id="reqh">REQUIREMENTS:</h3>
                <p id="reqt">
                    100+ Reddit karma <br>
                    Account older than 2 weeks<br>
                    1 post/comment on a Banano subreddit
                </p>
            </div>
        </div>


    </div>

    <div class="t">
        <div class="center">
            <!--<div class="m">BananoFaucet is currently under maintenance. Visit <a id="creeper"
                href="https://bananofaucet.cc/down">BananoFaucet.cc/down</a> for more information</div>-->
            <form action="?" method="POST" id="cap">
                <div class="g-recaptcha" data-sitekey="6LeZ7yYaAAAAAP3ZKDy3Nsn3jLbgQOZWPzUfIcdH" data-callback="verify"
                    id="g-recaptcha">
                </div>
                <br />
            </form>

            <div class="forms">
                <form id="reddit">
                    <label for="faddr">Banano Address</label><br>
                    <input type="text" id="faddr" class="inp"><br>
                </form>

                <div id="btnDIV"><button type="button" id="btn" onclick="send()">Send</button></div>
            </div>
        </div>
        <div class="center">
            <table id="info" class="center">
                <tr>
                    <th>Faucet balance</th>
                    <th>Uses left</th>
                    <th>Faucet reward</th>
                </tr>
                <tr>
                    <td id="infaucet">Loading</td>
                    <td id="uses">Loading</td>
                    <td id="reward">Loading</td>
                </tr>

            </table>
            <div class="center" id="creeper">
                <a id="creeper"
                    href="https://creeper.banano.cc/explorer/account/ban_1faucetjuiyuwnz94j4c7s393r95sk5ac7p5usthmxct816osgqh3qd1caet/history">View
                    on Creeper</a>
            </div>


        </div>
    </div>
    <footer class="center">
        <hr>
        <div id="ftr">
            <p id="sup">Created by MiranDaniel (u/mirandanielcz) | Support me:</p>
            <br>
            <p id="addr">ban_1aws637mb3qnuf9j8swzufq3nj3fttuzkixbd817nmmhyms6a6kt1zyptq87</p>
        </div>
    </footer>
    
</body>

<script src="https://www.google.com/recaptcha/api.js"></script>
<script>
    var caesarShift = function (str, amount) {
        if (amount < 0) {
            return caesarShift(str, amount + 26);
        }

        var output = "";

        for (var i = 0; i < str.length; i++) {
            var c = str[i];

            if (c.match(/[a-z]/i)) {
                var code = str.charCodeAt(i);

                if (code >= 65 && code <= 90) {
                    c = String.fromCharCode(((code - 65 + amount) % 26) + 65);
                }

                else if (code >= 97 && code <= 122) {
                    c = String.fromCharCode(((code - 97 + amount) % 26) + 97);
                }
            }

            output += c;
        }

        return output;
    };
    function verify() {
        if (grecaptcha && grecaptcha.getResponse().length > 0) {
            console.log("K");
            document.getElementById("faddr").disabled = false;
            document.getElementById("btn").disabled = false;
            }
        }
    
    function send() {
        if (grecaptcha && grecaptcha.getResponse().length > 0) {
            if(document.getElementById("faddr").value.startsWith("ban_") === false){
                alert("This is not a valid Banano address")
                return;
            }
            if(document.getElementById("faddr").value.length != 64){
                alert("This is not a valid Banano address")
                return;
            }
            var str = `Please send me some Banano.%0A
Address: \`${document.getElementById("faddr").value}\`%0A
Press send to get your reward. (If the send button is grayed out, add a new character to the message, then remove it)%0A
%0A
%0A
--CODE-START--%0A
${grecaptcha.getResponse()}%0A
--CODE-END--
`
            console.log(str);
            window.location.href = "https://www.reddit.com/message/compose/?to=BananoFaucet&subject=BananoFaucet&message=" + str;
        }
        else {
            document.getElementById("faddr").disabled = true;
            document.getElementById("btn").disabled = true;
        }
    }
    
</script>
<script>
    var xhr = new XMLHttpRequest();
    xhr.open("POST", "https://kaliumapi.appditto.com/api", true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(JSON.stringify({
        action: "account_balance",
        account: "ban_1faucetjuiyuwnz94j4c7s393r95sk5ac7p5usthmxct816osgqh3qd1caet"
    }));
    xhr.onload = function () {
        var data = JSON.parse(this.responseText);
        if (data.balance / Math.pow(10, 29) < 11) {
            document.getElementById("faddr").disabled = true;
            document.getElementById("btn").disabled = true;

            document.getElementById("infaucet").style.color = "red";
            document.getElementById("reward").style.color = "red";
            var element = document.getElementById("g-recaptcha");
            element.classList.add("disabled-element");

        }
        document.getElementById("infaucet").innerHTML = `${Math.round(data.balance / Math.pow(10, 29))} BAN`;
        document.getElementById("uses").innerHTML = `${Math.round(data.balance / Math.pow(10, 29)/10)}`;
        document.getElementById("reward").innerHTML = `10 BAN`;
    };
</script>
<script>

</script>
<script>


function text(url) {
  return fetch(url).then(res => res.text());
}

var ip;
function readTextFile(file)
{
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function ()
    {
        if(rawFile.readyState === 4)
        {
            if(rawFile.status === 200 || rawFile.status == 0)
            {
                
                text('https://www.cloudflare.com/cdn-cgi/trace').then(data => {
                let ipRegex = /[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}/
                ip = data.match(ipRegex)[0];
                var allText = rawFile.responseText.split("\n");
                console.log(allText);
                console.log(ip);
                console.log(allText.includes(ip))
                });
            }
        }
    }
    rawFile.send(null);
}
readTextFile("tor.t");
</script>


</html>
